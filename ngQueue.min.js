/*! ngQueue
version: 0.1.0
build date: 2013-12-29
author: Robin Fan
https://github.com/pc035860/ngQueue.git */
angular.module("ngQueue",[]).factory("$queueFactory",["$q","$window","$timeout","$rootScope",function(a,b,c,d){var e=function(a){this.init(a)},f=e.prototype;return f._limit=null,f._queue=null,f._deferFunc=null,f.init=function(a){this._limit=a.limit,this._queue=[],a.deferred&&(this._deferFunc=b.setImmediate?function(a){b.setImmediate(function(){a(),d.$apply()})}:function(a){c(a,0,!0)})},f.enqueue=function(a,b,c){this._queue.push([a,b,c]),this.dequeue()},f.dequeue=function(){if(this._deferFunc){var a=this;this._deferFunc(function(){a._dequeue()})}else this._dequeue()},f._dequeue=function(){if(!(this._limit<=0||0===this._queue.length)){this._limit--;var b,c,d=this._queue.shift(),e=d[0],f=d[1],g=d[2],h=this;b=c=function(){h._limit++,h.dequeue()},a.when(e.apply(f||null,g||null)).then(b,c)}},f.clear=function(){this._queue.length=0},function(a,b){var c;return angular.isObject(a)?c=a:(a=a||1,angular.isUndefined(b)&&(b=!1),c={limit:a,deferred:!!b}),new e(c)}}]);